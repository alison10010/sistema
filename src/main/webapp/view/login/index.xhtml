<!DOCTYPE html>
<html lang="pt-BR" 
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core">

<h:head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" type="image/png" href="/security/img/fevicon.png" />
  <title>Login</title>

  <!-- Bootstrap 5 -->
  <link href="/sistema/bootstrap/bootstrap.min.css" rel="stylesheet"/>

  <!-- Bootstrap Icons (opcional) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"/>

  <style>

	    :root{
	      --bg: #f6f8ff;
	      --card: rgba(255,255,255,.86);
	      --border: rgba(17,24,39,.10);
	      --text: #0f172a;
	      --muted: rgba(15,23,42,.66);
	
	      --primary: #6d28d9;
	      --primary-2: #a855f7;
	
	      --shadow: 0 18px 50px rgba(17, 24, 39, .12);
	      --radius: 22px;
	    }
	
	    body{
	      min-height: 100vh;
	      background: radial-gradient(1200px 500px at 20% 0%, rgba(13,110,253,.10), transparent 55%),
		                  radial-gradient(900px 400px at 85% 10%, rgba(220,53,69,.08), transparent 60%),
		                  var(--bg);
		      color: var(--text);
	    }
	
	    .shell{
	      min-height: 100vh;
	      display: grid;
	      place-items: center;
	      padding: 24px;
	    }
	
	    .login-wrap{
	      width: 100%;
	      max-width: 1040px;
	      border: 1px solid var(--border);
	      border-radius: var(--radius);
	      overflow: hidden;
	      background: rgba(255,255,255,.55);
	      backdrop-filter: blur(12px);
	      -webkit-backdrop-filter: blur(12px);
	      box-shadow: var(--shadow);
	    }
	
	    /* Painel de imagem (referência) */
	    .hero{
	      position: relative;
	      min-height: 520px;
	      background: 
		    url("/sistema/img/logo_login.png") 
		    center/cover no-repeat;
	    }
	
	    .hero::before{
	      content:"";
	      position:absolute; inset:0;
	      
	      mix-blend-mode: normal;
	    }
	
	    .hero-inner{
	      position: relative;
	      height: 100%;
	      padding: 36px;
	      display: flex;
	      flex-direction: column;
	      justify-content: flex-end;
	      gap: 14px;
	      color: var(--muted);
	    }
	
	    .brand{
	      display:flex; align-items:center; gap:12px;
	      user-select:none;
	    }
	
	    .brand-badge{
	      width: 44px; height: 44px;
	      border-radius: 14px;
	      display:grid; place-items:center;
	      background: rgba(255,255,255,.18);
	      border: 1px solid rgba(255,255,255,.25);
	      box-shadow: 0 10px 30px rgba(0,0,0,.18);
	    }
	
	    .brand h1{
	      font-size: 1.15rem;
	      margin:0;
	      letter-spacing:.2px;
	      font-weight: 700;
	    }
	
	    .hero p{
	      margin:0;
	      color: var(--muted);
	      max-width: 420px;
	      line-height: 1.35;
	      font-size: .98rem;
	    }
	
	    /* Painel do form */
	    .form-panel{
	      background: rgba(255,255,255,.82);
	      height: 100%;
	      padding: 40px 42px;
	    }
	
	    .form-title{
	      font-weight: 800;
	      letter-spacing: -.02em;
	      margin: 0 0 6px;
	      font-size: 1.75rem;
	    }
	
	    .form-subtitle{
	      color: var(--muted);
	      margin: 0 0 26px;
	      font-size: .98rem;
	    }
	
	    .input-group-text{
	      background: #fff;
	      border-color: var(--border);
	      border-right: 0;
	      border-radius: 14px 0 0 14px;
	    }
	
	    .form-control{
	      border-color: var(--border);
	      border-left: 0;
	      border-radius: 0 14px 14px 0;
	      padding: 12px 14px;
	    }
	
	    .form-control:focus{
	      box-shadow: none !important;
	      border-color: none !important;
	    }
	
	    .soft-card{
	      background: var(--card);
	      border: 1px solid var(--border);
	      border-radius: 18px;
	      padding: 18px;
	    }
	
	    .btn-premium{
	      border: 0;
	      border-radius: 999px;
	      padding: 12px 16px;
	      font-weight: 700;
	      letter-spacing: .2px;
	      background: linear-gradient(135deg, var(--primary), var(--primary-2));
	      box-shadow: 0 14px 35px rgba(109,40,217,.22);
	      transition: transform .08s ease, box-shadow .2s ease, filter .2s ease;
	    }
	
	    .btn-premium:hover{
	      filter: brightness(1.03);
	      box-shadow: 0 16px 44px rgba(109,40,217,.26);
	    }
	
	    .btn-premium:active{
	      transform: translateY(1px);
	    }
	
	    .link-muted{
	      color: rgba(15,23,42,.70);
	      text-decoration: none;
	    }
	    .link-muted:hover{ color: rgba(15,23,42,.92); text-decoration: underline; }
	
	    .divider{
	      height: 1px;
	      background: rgba(17,24,39,.10);
	      margin: 18px 0;
	    }
	
	    /* Ajuste mobile: some o painel da imagem */
	    @media (max-width: 991.98px){
	      .hero{ display:none; }
	      .form-panel{ padding: 34px 24px; }
	    }
	  </style>
</h:head>

<h:body>

	<main class="shell">
	    <section class="login-wrap">
	      <div class="row g-0">
	        <!-- ESQUERDA (imagem referência) -->
	        <div class="col-lg-7">
	          <div class="hero">
	            <div class="hero-inner">
	              <div class="brand">
	                <div class="brand-badge">
	                  <i class="bi bi-shield-lock-fill fs-4"></i>
	                </div>
	                <div>
	                  <h1>Sistema</h1>
	                  <div style="font-size:.92rem; opacity:.9;">Acesso seguro e rápido</div>
	                </div>
	              </div>
	              <p>
	                Entre com suas credenciais para continuar.
	              </p>
	            </div>
	          </div>
	        </div>
	
	        <!-- DIREITA (form) -->
	        <div class="col-lg-5">
	          <div class="form-panel">
	            <div class="mb-3">
	              <div class="form-title">Entrar</div>
	              <div class="form-subtitle">Use seu usuário e senha para acessar o sistema.</div>
	            </div>
	
				<center>
					<c:choose>
				        <c:when test="${param.error eq 'bad'}">
				            <span style="color:red;">Usuário ou senha inválidos!</span>
				        </c:when>
				        <c:when test="${param.error eq 'locked'}">
				            <span style="color:red;">Muitas tentativas! Aguarde alguns minutos antes de tentar novamente.</span>
				            <span id="contador" style="font-weight:bold; display:block; margin-top:6px;"></span>
				        </c:when>
				        <c:when test="${param.error eq 'denied'}">
				            <span style="color:red;">Você não possui acesso ao sistema.</span>
				        </c:when>
				        <c:when test="${param.error eq 'auth'}">
				            <span style="color:red;">Erro na autenticação</span>
				        </c:when>
				        <c:when test="${param.logout eq 'true'}">
				            <span style="color:green;">Logout realizado com sucesso!</span>
				        </c:when>
				    </c:choose>
					
					<span id="geoStatus" style="font-weight:bold; display:block; margin-top:6px;">
			            
			        </span>

           		</center>
	            		
	            <div class="soft-card">
	              <form action="#" method="post" autocomplete="off">
	                <!-- Usuário -->
	                <label class="form-label fw-semibold mb-2" for="usuario">Usuário</label>
	                <div class="input-group mb-3">
	                  <span class="input-group-text"><i class="bi bi-person"></i></span>

                    	<p:inputText type="text" class="form-control" id="username" placeholder="usuario"  showDetail="false" maxlength="60"
		                  required="true" requiredMessage="Digite seu usuário" 
		                  validatorMessage="Informe o usuário!" value="#{login.username}">
	                  		<f:validateLength minimum="1"></f:validateLength>
	                  	</p:inputText>

	                </div>
	
	                <!-- Senha -->
	                <div class="d-flex align-items-center justify-content-between">
	                  <label class="form-label fw-semibold mb-2" for="senha">Senha</label>	                  
	                </div>
	                <div class="d-flex align-items-center gap-2 mb-3">
  
					  <div class="input-group flex-grow-1">
					    <span class="input-group-text">
					      <i class="bi bi-lock"></i>
					    </span>					    
					      
					    <p:inputText type="password" class="form-control" id="password" placeholder="Digite sua senha"  showDetail="false"
	                    required="true" requiredMessage="Digite sua senha!" validatorMessage="Digite sua senha" value="#{login.password}">
	                  		<f:validateLength minimum="1"></f:validateLength>
	                  	</p:inputText>					      
					      
					  </div>
					
					  <button type="button"
					          class="btn btn-outline-secondary rounded-pill px-3"
					          onclick="toggleSenha()"
					          aria-label="Mostrar/ocultar senha">
					    <i class="bi bi-eye" id="eyeIcon"></i>
					  </button>					
					</div>
					
	                <button type="submit" class="btn btn-premium w-100 text-white">
	                  Entrar <i class="bi bi-arrow-right ms-1"></i>
	                </button>
	                
	                
	                <div class="d-flex align-items-center gap-2 mb-3" style="justify-content: space-between;;margin-top: 10px;">
  
				
					    <a href="/security/cadastro-colaborador"
						   class="text-decoration-none"
						   style="color: rgba(15,23,42,.78);">
						   <i class="bi bi-person-plus me-1"></i> Criar conta
						</a>					      					      
					
					
					  <a class="link-muted text-decoration-none"  href="#" onclick="return false;">Esqueci a senha</a>			
					</div>
	              	                
	
	                <div class="divider"></div>
	
	                <div class="d-flex justify-content-between align-items-center">
	                  <small style="color: var(--muted);">© <span id="year"></span> - Consulta Médica</small>
	                  <a class="link-muted small" href="#" onclick="return false;">Suporte</a>
	                </div>
	                
	                

	                
	              </form>
	            </div>
	          </div>
	        </div>
	      </div>
	    </section>
	  </main>
	
	  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
	  <script>
	    // Ano automático
	    document.getElementById("year").textContent = new Date().getFullYear();
	
	    // Mostrar/ocultar senha
	    function toggleSenha() {
	      const input = document.getElementById("password");
	      const icon = document.getElementById("eyeIcon");
	      const isPwd = input.type === "password";
	      input.type = isPwd ? "text" : "password";
	      icon.className = isPwd ? "bi bi-eye-slash" : "bi bi-eye";
	    }
	  </script>

</h:body>
</html>
